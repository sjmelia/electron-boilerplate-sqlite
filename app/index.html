<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" type="text/css" href="style.css">
  <link href='https://fonts.googleapis.com/css?family=Alatsi' rel='stylesheet'>
	<meta charset="utf-8">
	<title>Booneville PD Radio Log</title>
</head>
  <body class="w3-light-gray">
    <h1 class="w3-center w3-black">Booneville PD Radio Log</h1>
    <div class="w3-center">
      <table class="w3-table w3-white w3-left-align">
        <tbody id="database">
        </tbody>
      </table>
    </div>
    <script>
      const sqlite3 = require('sqlite3').verbose();
      var db = new sqlite3.Database('./database/database.sqlite3');

      db.serialize(function() {

       // var entry = db.prepare("INSERT INTO logs(user) VALUES (?)");
        
      //    entry.run("New User");

       // entry.finalize();

       //target the tbody element to have data inserted
        var rows = document.getElementById("database");
        //query the database to include all entries that are made by the current user
        db.each("SELECT rowid AS id, user, date, shift, time, subject, log FROM logs ORDER BY time", function(err, row) {
          // creates the HTML elements that will recieve the data from the database
          var entry = document.createElement("tr");
          var entryTime = document.createElement("td");
          // each createTextNode is filling the column of each row with data from the database
          var entryTimeText = document.createTextNode(row.time);
          var entrySubject = document.createElement("td");
          var entrySubjectText = document.createTextNode(row.subject);
          var entryLog = document.createElement("td");
          var entryLogText = document.createTextNode(row.log);
          
          entryTime.appendChild(entryTimeText);
          entrySubject.appendChild(entrySubjectText);
          entryLog.appendChild(entryLogText);
          entry.appendChild(entryTime);
          entry.appendChild(entrySubject);
          entry.appendChild(entryLog);
          rows.appendChild(entry);
        });
      });

      db.close();
    </script>
  </body>
</html>
